<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Desqueeze</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="topbar">
        <h1>Desqueeze</h1>
        <div class="topbar-right">
          <span class="chip">Client-side</span>
          <span class="chip">No upload</span>
        </div>
      </header>

      <section class="layout">
        <aside class="panel controls is-hidden" aria-label="Controls" id="controlsPanel">
          <input id="fileInput" type="file" accept="image/*" />

          <button class="btn" id="chooseBtn">Choose another image</button>

          <div class="control-block">
            <div class="label-row">
              <span class="label">Lens ratio</span>
              <span class="value"><span id="ratioValue">2.00</span>×</span>
            </div>
            <div class="presets" role="radiogroup" aria-label="Lens preset">
              <button class="preset" data-ratio="1.33">1.33×</button>
              <button class="preset" data-ratio="1.50">1.50×</button>
              <button class="preset" data-ratio="1.80">1.80×</button>
              <button class="preset active" data-ratio="2.00">2.00×</button>
            </div>
            <input id="ratioRange" type="range" min="1.00" max="3.00" step="0.01" value="2.00" />
          </div>

          <div class="control-block motion-block">
            <div class="label-row">
              <span class="label">Motion</span>
              <span class="value"><span id="motionPresetValue">Medium</span></span>
            </div>
            <div class="presets" role="radiogroup" aria-label="Motion preset">
              <button class="motion-preset" data-motion="subtle">Subtle</button>
              <button class="motion-preset active" data-motion="medium">Medium</button>
              <button class="motion-preset" data-motion="expressive">Expressive</button>
            </div>
            <div class="mini-control">
              <label class="label" for="stiffnessRange">Spring stiffness</label>
              <input id="stiffnessRange" type="range" min="0.06" max="0.30" step="0.01" value="0.15" />
            </div>
            <div class="mini-control">
              <label class="label" for="dampingRange">Spring damping</label>
              <input id="dampingRange" type="range" min="0.60" max="0.92" step="0.01" value="0.78" />
            </div>
          </div>

          <div class="control-block inline">
            <label class="label" for="formatSelect">Export</label>
            <select id="formatSelect" class="select">
              <option value="image/png">PNG</option>
              <option value="image/jpeg">JPEG</option>
              <option value="image/webp">WEBP</option>
            </select>
          </div>

          <button id="downloadBtn" class="btn primary" disabled>Download</button>
        </aside>

        <section class="panel stage is-empty" aria-label="Preview" id="stage">
          <div id="dropzone" class="dropzone" tabindex="0">
            <div id="welcome" class="welcome">
              <p class="welcome-title">Drop an anamorphic image</p>
              <p class="muted">or pick one from your device</p>
              <button class="btn primary" id="welcomeChooseBtn">Choose image</button>
            </div>
            <p class="muted drop-hint">Everything stays local in your browser.</p>
          </div>

          <div class="meta" id="meta" hidden></div>

          <div class="canvas-wrap">
            <canvas id="canvas" aria-label="Desqueezed preview"></canvas>
          </div>
        </section>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/animejs@4.0.2/lib/anime.iife.min.js"></script>
    <script src="app.js" defer></script>
  </body>
</html>
